<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>FLIGHT DASHBOARD</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../static/plugins/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <link rel="stylesheet" href="../static/plugins/colorpicker/bootstrap-colorpicker.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../static/dist/css/adminlte.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="../static/plugins/iCheck/flat/blue.css">
  <!-- Morris chart -->
  <link rel="stylesheet" href="../static/plugins/morris/morris.css">
  <link rel="stylesheet" href="../static/plugins/select2/select2.min.css">
  <!-- jvectormap -->
  <link rel="stylesheet" href="../static/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
  <!-- Date Picker -->
  <link rel="stylesheet" href="../static/plugins/datepicker/datepicker3.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="../static/plugins/daterangepicker/daterangepicker-bs3.css">
  <link rel="stylesheet" href="../static/plugins/timepicker/bootstrap-timepicker.min.css">
  <!-- bootstrap wysihtml5 - text editor -->
  <link rel="stylesheet" href="../static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
 
   <link rel="stylesheet" href="../static/plugins/jquery-ui/jquery-ui.min.css">
  <style>
  body {
  font-family: "helvetica";
  font-size: 100%
}
select{
border:2px solid #777;
padding: .8rem 9rem .5rem 7rem;
border-radius:3px;
color:#565656;
position: center;


}
.airline, .Source, .Destination{
  display: inline-block;
  position: relative;
}

.form-check-input {
  position: inherit;
  }
/*.airline select {background: transparent;}*/
/*.airline::after{
  
  content: "";
  display: inline-block;
  border-top: 10px solid #777;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  position:absolute;
  top:calc(50% -5px);
  top:50%;
  right: .5rem;
  
  
  /*z-index: -1; */
  pointer-events: none;
  */
}

.Source::after{
  content: "";
  display: inline-block;
  border-top: 10px solid #777;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  position:absolute;
  top:calc(50% -5px);
  top:50%;
  right: .5rem;
  /*z-index: -1; */
  pointer-events: none; 
}


.Destination::after{
  content: "";
  display: inline-block;
  border-top: 10px solid #777;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  position:absolute;
  top:calc(50% -5px);
  top:50%;
  right: .5rem;
  /*z-index: -1; */
  pointer-events: none; 
}
  
/*  #fuel_sec
  {
    display: none;
  }*/
  .box{
  
  width: 600px 2px;
  height: 100%;
  padding: 20px;
  box-shadow: 0px 0px 10px 2px grey;
  border: 8px solid #49abc8;
  font-family: helvetica;
  background-image: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpUdrK-Dxydd2nJ7wfjQ8lFpfKUrmeF-zLL8Tyga2fcK7hq2Yo);
  background-size: cover;
  text-align: center;
  }
  
.butto {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border: 3px solid #3f8e48;
    border-radius: 8%;
} 

.butto:hover
{
  background-color: #3f8e48;
}


.rio{
    padding: 7px 20px;
    margin: 18px 0;
    box-sizing: border-box;
    border: 1px solid #ccc;
    -webkit-transition: 0.5s;
    transition: 0.5s;
    outline: none;
}

.nrio{
    padding: 9px 20px;
    margin: 18px 12px;
    box-sizing: border-box;
    border: 3px solid #ccc;
    -webkit-transition: 0.5s;
    transition: 0.5s;
    outline: none;
    color: #565656;
}
/*  input[type=text] {
    width: 50%;
    padding: 12px 20px;
    margin: 18px 0;
    box-sizing: border-box;
    border: 3px solid #ccc;
    -webkit-transition: 0.5s;
    transition: 0.5s;
    outline: none;
}
input[type=text]:focus {
    border: 3px solid #555;
}*/

  </style>
  </head>
  <body  class="hold-transition sidebar-mini" >
  <div class="wrapper">

<!-- Navbar -->
  <nav class="main-header navbar navbar-expand bg-white navbar-light border-bottom">
  
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
          <div class="bg-info-gradient">
        <a class="nav-link" data-widget="pushmenu" href="#"><i class="fa fa-bars"></i></a>
      </li>
  
      <li class="nav-item d-none d-sm-inline-block">
        <a href="index2.html" class="nav-link"><strong>Home</strong></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="#" class="nav-link"><strong>Contact</strong></a>
      </li>
    </ul>

    <!-- SEARCH FORM -->
    <form class="form-inline ml-3">
      <div class="input-group input-group-sm">
    
        <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-navbar" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </div>
      </div>
    </form>
    
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="Home.html" class="brand-link">
      
      <span  class="brand-text font-weight-light"> <strong>FLIGHT ANALYSIS</strong></span>
    </a>

    

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item has-treeview menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-secondary fa fa-dashboard"></i>
              <p>
                Dashboard
                <i class="right fa fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="showfuel" class="nav-link">
                  <i class="fa fa-circle-o nav-icon"></i>
                  <p><strong>FUEL CONSUMPTION</strong></p>
         
                </a>
              </li>
              <li class="nav-item">
                <a href="showcharge" class="nav-link ">
                  <i class="fa fa-circle-o nav-icon"></i>
                  <p><strong>CHARGE ESTIMATION</strong></p>
                </a>
              </li>
              <li class="nav-item">
                <a href="comparision" class="nav-link">
                  <i class="fa fa-circle-o nav-icon"></i>
                  <p><strong>FLIGHT COMPARISION</strong></p>
                </a>
          </li>

              <li class="nav-item">
                <a href="showmap" class="nav-link">
                  <i class="fa fa-circle-o nav-icon"></i>
                  <p><strong>FLIGHT TRACKING</strong></p>
                </a>

              </li>
        <li class="nav-item">
                <a href="showgt" class="nav-link">
                  <i class="fa fa-circle-o nav-icon"></i>
                  <p><strong>GENERAL TASKS</strong></p>
                </a>
          </li>
             
             
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>
 <!-- Content Wrapper. Contains page content -->
  
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    

    <!-- Main content -->
  <div class="box">
<h1><b style="color: white"> Management Information System Report</b></h1>
<div  class="card card-info" style="padding-bottom: 1.5%;">
      
              <div class="card-header">
                <h3 class="card-title">Information Required</h3>
              </div>
            <!-- <form role="form"> -->
                <div class="card-body">
                  <p style="text-align: justify;">
                    <strong>Management Information System (MIS)</strong>  is an information system used for decision-making, and for the coordination, control, analysis, and visualization of information in an organisation; especially in a company.Companies are able to identify their strengths and weaknesses due to the presence of revenue reports, employees' performance record etc. Identifying these aspects can help a company improve its business processes and operations. <br>
                    Choose any option in the following dropdown to get MIS Report accordingly.
                  </p>

                  <div class="form-group">
                    <select class="form-control" id="airline" class="rio" >
                       <option  value="" selected disabled hidden>Select Option</option>
                       <option>Airline Wise</option>
                       <option>Source Wise</option>
                       <option>Destination Wise</option>
                       <option>Speed Wise</option>
                    </select>
                  </div>

                  <p style="text-align: justify;">
                    <strong>Airline wise :</strong> Shows statistics of every flight of the choosen airline, including most frequent destination and much more... <br>
                    <strong>Source wise :</strong>  Shows statistics of every flight w.r.t the choosen source, including most frequent model & airline used and much more...<br>
                    <strong>Destination wise :</strong>  Shows statistics of every flight w.r.t the choosen destination, including most frequent model used and much more...<br>
                  </p>

                  <select class="form-control" id="airline_drpdown" class="rio" style="display: none;">
                      <option  value="" selected disabled hidden>Select Airline</option>
                    </select>

                    <select class="form-control" id="source_drpdown" class="rio" style="display: none;">
                      <option  value="" selected disabled hidden>Select Source</option>
                    </select>

                    <select class="form-control" id="destination_drpdown" class="rio" style="display: none;">
                      <option  value="" selected disabled hidden>Select Destination</option>
                    </select>

                    <select class="form-control" id="spd_drpdown" class="rio" style="display: none;">
                      <option selected disabled hidden>Select Speed Range (in knots)</option>
                      <option  >150-199</option>
                      <option  >200-249</option>
                      <option >250-299</option>
                      <option  >300-349</option>
                      <option >350-399</option>
                      <option   >400-459</option>
                      <option   >450-499</option>
                      <option   >Custom Speed</option>
                    </select>

                    <input class="rio form-control" type="text" id="spd_txtbox" placeholder="Enter Speed Range" style="display: none;">

          </div>
          <div class="card-footer" style="padding: 1.75rem 1.25rem">
                  <button id="enter" type="submit" class="btn btn-success float-right">Submit</button>
                  <button type="submit" class="btn btn-danger float-left">Cancel</button>
                </div>
                </div>
                <!-- /.card-body -->
                
                <!-- /.card-footer -->
              <!-- </form> -->
            </div>

            <div id="fuel_chart_div" style="width: 100%; display: none;" class="card card-info">
              <div class="card-header">
                <h3 id="fuel_change" class="card-title">Fuel Consumption(Gallons) Models Wise</h3>
              </div>
              <div id="fuel_chart" class="card-body" style="width: 100%; height: 550px;"></div>
            </div>

            <div id="src_chart_div" style="display: none;" class="card card-info">
              <div class="card-header">
                <h3 id="src_change" class="card-title">Most Frequent Sources (Top 15)</h3>
              </div>
              <div id="src_chart" class="card-body" style="width: 100%; "></div>
            </div>

            <div id="dest_chart_div" style="display: none;" class="card card-info">
              <div class="card-header">
                <h3 id="dest_change" class="card-title">Most Frequent Destinations (Top 15)</h3>
              </div>
              <div id="dest_chart" class="card-body" style="width: 100%; "></div>
            </div>

            <div id="mdl_chart_div" style="display: none;" class="card card-info">
              <div class="card-header">
                <h3 id="mdl_change" class="card-title">Most Frequent Models Used (Top 15)</h3>
              </div>
              <div id="mdl_chart" class="card-body" style="width: 100%; "></div>
            </div>
            
           
            <!-- /.card -->
                <!-- /.form group -->
               <div id="airline_table" style="display: none;" class="col-12">
                
                <div class="card">
                  <div class="bg-info-gradient">
                    <div class="card-header">
                      <h3 id="total" class="card-title"><strong>ESTIMATIONS</strong></h3>
                    </div>
                    
                    
                    <div class="card-body table-responsive p-0">
                      
                      <table class="table table-hover">
                        
                        <tr>
                          <th>ID</th>
                          <th>ICAO</th>
                          <th>MODEL</th>
                          <th>TIME OF FLIGHT (hr:min:sec)</th>
                          <th>FUEL (gallons)</th>
                          <th>MILES</th>
                          <th>AVERAGE SPEED (knots)</th>
                          <th>AVERAGE ALTITUDE (feets)</th>
                          <th id="change">SOURCE</th>
                          <th id="change1">DESTINATION</th>
                          <th>COUNTRIES IN ROUTE</th>
                        </tr>
                        <tbody id="airline_table_body">
                          <tr >
                            <td>ID</td>
                            <td><span class="tag tag-success">11393571</span></td>
                            <td>Icao</td>
                            <td><span class="tag tag-success">ADDA23 2002</span></td>
                            <td>Model</td>
                            <td><span class="tag tag-success">BOEING 717-200</span></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Average Speed</td>
                            <td><span class="tag tag-success">444.3586206896552</span></td>
                            <td>Average Altitude</td>
                            <td><span class="tag tag-success">29625.862068965518</span></td>
                            <td>Miles</td>
                            <td><span class="tag tag-success">3349.526411946571</span></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Countries in route</td>
                            <td><span class="tag tag-success">United States Of America</span></td>
                            <td>Country</td>
                            <td><span class="tag tag-success">United States</span></td>
                            <td>Fuel</td>
                            <td><span class="tag tag-success">16747.632059732856</span></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Inspect Altitude</td>
                            <td ><button id="show" type="submit" class="btn btn-success float-left show" style="padding: 3%; padding-left: 8%; padding-right: 8%; font-size: 14px;">Submit</button></td>
                            <td>  </td>
                            <td><span class="tag tag-success">  </span></td>
                            <td>Inspect Speed</td>
                            <td><button id="show" type="submit" class="btn btn-success float-left" style="padding: 3%; padding-left: 8%; padding-right: 8%; font-size: 14px;">Submit</button></td>
                            <td></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                </div>
              </div> 
              <!-- /.card-body -->
            </div>
            
            <!-- /.card -->

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->

</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="../static/plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  // $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../static/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
<script src="../static/plugins/timepicker/bootstrap-timepicker.min.js"></script>
<!-- Morris.js charts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="../static/plugins/morris/morris.min.js"></script>
<!-- Sparkline -->
<script src="../static/plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="../static/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="../static/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="../static/plugins/knob/jquery.knob.js"></script>
<script src="../static/plugins/input-mask/jquery.inputmask.js"></script>
<script src="../static/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
<script src="../static/plugins/input-mask/jquery.inputmask.extensions.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="../static/plugins/iCheck/icheck.min.js"></script>

<script src="../static/plugins/select2/select2.full.min.js"></script>
<!-- daterangepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
<script src="../static/plugins/daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="../static/plugins/datepicker/bootstrap-datepicker.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="../static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="../static/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../static/plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../static/dist/js/adminlte.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="../static/dist/js/pages/dashboard.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../static/dist/js/demo.js"></script>
<script type="text/javascript" src="../static/jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript" src="../static/jquery-ui/external/jquery/jquery.js"></script>

<script>
  function get_dropdown_value(name)
  {
    var res = document.getElementById(name);
    var result=res.options[res.selectedIndex].value;
    return result
  }

  Array.prototype.unique = function() 
  {
    return this.filter(function (value, index, self) {
    return self.indexOf(value) === index;
    });
  }

  function find(id,arr)
  {
    var sel = document.getElementById(id);
    arr=arr.unique();
    for(var i = 0; i < arr.length; i++)
    {
      var opt = document.createElement('OPTION');
      txt = document.createTextNode(arr[i]);
      opt.appendChild(txt);
      opt.setAttribute("value",arr[i]);
      id.insertBefore(opt,id.lastChild);
    }
  }

  function pie_chart(result,divs,title)
  {
    var data = [{
      values: result.values,
      labels: result.keys,
      type: 'pie'
    }];

    var layout = {
      height: 500,
      width: 1090
    };

    Plotly.newPlot(divs, data, layout);
  }


  function bar_plot(data,div,id)
  {
    var data = data
    var layout = {yaxis: {title: 'Fuel (gallons)'},showlegend: false};

    Plotly.newPlot(div, data, layout);
  }

  $(document).ready(function()
  {
    document.getElementById("airline").onchange=function()
    {
      var res=get_dropdown_value("airline");
      if (res=="Airline Wise")
      {
        document.getElementById("change").innerHTML="Source"
        document.getElementById("change1").innerHTML="Destination"
        document.getElementById("total").setAttribute("style","font-weight: bold");
        document.getElementById("airline_drpdown").setAttribute("style","display: block");
        document.getElementById("source_drpdown").setAttribute("style","display: none");
        document.getElementById("destination_drpdown").setAttribute("style","display: none");
        $.ajax({
          type: "POST",
          url: "http://127.0.0.1:5000/flights",
          success: function(response)
          {
            var op=[];
            var res= JSON.parse(response);
            length=res.length;
            for (var i=0; i<length;i++)
            {
              op.push(res[i]["Op"]);
            }
            find(airline_drpdown,op);
          }
        });

        

        document.getElementById("airline_drpdown").onchange=function()
        {
          document.getElementById("enter").onclick=function()
          { 
            var ans= get_dropdown_value("airline_drpdown");
            var data={"airline":ans};
            $.ajax({
          type: "POST",
          data: data,
          url: "http://127.0.0.1:5000/airline_wise",
          success: function(response)
          {
            var result= JSON.parse(response);
            pie_chart(result['freq_dest'],'dest_chart','Most Frequent Destination (Top 15)');
            pie_chart(result['freq_source'],'src_chart','Most Frequent Source (Top 15)');
            pie_chart(result['freq_mdl'],'mdl_chart','Most Frequent Model Used (Top 15)');
            bar_plot(result["data"],'fuel_chart',result["id"]);
            var table = document.getElementById("airline_table_body");
                table.innerHTML="";
                length=result["acList"].length;
                document.getElementById("total").innerHTML="ESTIMATIONS (TOTAL: "+length+") "
                for(var i=0; i<length; i++)
                {
                  var row = table.insertRow(i);
                  var cell0 = row.insertCell(0);
                  var cell1 = row.insertCell(1);
                  var cell2 = row.insertCell(2);
                  var cell3 = row.insertCell(3);
                  var cell4 = row.insertCell(4);
                  var cell5 = row.insertCell(5);
                  var cell6 = row.insertCell(6);
                  var cell7 = row.insertCell(7);
                  var cell8 = row.insertCell(8);
                  var cell9 = row.insertCell(9);
                  var cell10 = row.insertCell(10);
                  cell0.innerHTML = result["acList"][i]["Id"];
                  cell1.innerHTML = result["acList"][i]["Icao"];
                  cell2.innerHTML = result["acList"][i]["Mdl"];
                  cell3.innerHTML = new Date((result["acList"][i]["Miles"]*1609.34)/(result["acList"][i]["avg_spd"]*0.514444) * 1000).toISOString().substr(11, 8);
                  cell9.innerHTML = result["acList"][i]["To"];
                  cell8.innerHTML = result["acList"][i]["From"];
                  cell5.innerHTML = result["acList"][i]["Miles"].toFixed(3);
                  cell4.innerHTML = ((result["acList"][i]["Miles"])*5).toFixed(3);
                  cell10.innerHTML = result["acList"][i]["BwCountries"];
                  cell6.innerHTML = result["acList"][i]["avg_spd"].toFixed(3);
                  cell7.innerHTML = result["acList"][i]["avg_alt"].toFixed(3);
                }         
          },
          
          complete: function(response) 
          {
            
          }

        });
            document.getElementById("airline_table").setAttribute("style","display: block");
            document.getElementById("src_chart_div").setAttribute("style","display: block");
            document.getElementById("dest_chart_div").setAttribute("style","display: block");
            document.getElementById("mdl_chart_div").setAttribute("style","display: block");
            document.getElementById("fuel_chart_div").setAttribute("style","display: block");
          }
        }    
      }



      else if(res=="Source Wise")
      {
        document.getElementById("change").innerHTML="Airline"
        document.getElementById("change1").innerHTML="Destination"
        document.getElementById("fuel_change").innerHTML="Fuel Consumption(Gallons) Airline Wise"
        document.getElementById("src_change").innerHTML="Most Frequent Airline (Top 15)"
        document.getElementById("dest_change").innerHTML="Most Frequent Destination (Top 15)"
        document.getElementById("mdl_change").innerHTML="Most Frequent Model Used (Top 15)"
        
        document.getElementById("total").setAttribute("style","font-weight: bold");
        document.getElementById("airline_drpdown").setAttribute("style","display: none");
        document.getElementById("source_drpdown").setAttribute("style","display: block");
        document.getElementById("destination_drpdown").setAttribute("style","display: none");
        $.ajax({
          type: "POST",
          url: "http://127.0.0.1:5000/flights",
          success: function(response)
          {
            var from=[];
            var res= JSON.parse(response);
            length=res.length;
            for (var i=0; i<length;i++)
            {
              from.push(res[i]["From"]);
            }
            find(source_drpdown,from);
          }
        });


        document.getElementById("source_drpdown").onchange=function()
        {
          document.getElementById("enter").onclick=function()
          { 
            var ans= get_dropdown_value("source_drpdown");
            var data={"airline":ans};
            $.ajax({
              type: "POST",
              data: data,
              url: "http://127.0.0.1:5000/source_wise",
              success: function(response)
              {
                var result= JSON.parse(response);
                pie_chart(result['freq_dest'],'dest_chart','Most Frequent Destination (Top 15)');
                pie_chart(result['freq_airline'],'src_chart','Most Frequent Airline (Top 15)');
                pie_chart(result['freq_model'],'mdl_chart','Most Frequent Model Used (Top 15)');
                bar_plot(result["data"],'fuel_chart',result["mdl"]);
                var table = document.getElementById("airline_table_body");
                    table.innerHTML="";
                    length=result["acList"].length;
                    document.getElementById("total").innerHTML="ESTIMATIONS (TOTAL: "+length+") "
                    for(var i=0; i<length; i++)
                    {
                      var row = table.insertRow(i);
                      var cell0 = row.insertCell(0);
                      var cell1 = row.insertCell(1);
                      var cell2 = row.insertCell(2);
                      var cell3 = row.insertCell(3);
                      var cell4 = row.insertCell(4);
                      var cell5 = row.insertCell(5);
                      var cell6 = row.insertCell(6);
                      var cell7 = row.insertCell(7);
                      var cell8 = row.insertCell(8);
                      var cell9 = row.insertCell(9);
                      var cell10 = row.insertCell(10);
                      cell0.innerHTML = result["acList"][i]["Id"];
                      cell1.innerHTML = result["acList"][i]["Icao"];
                      cell2.innerHTML = result["acList"][i]["Mdl"];
                      cell3.innerHTML = new Date((result["acList"][i]["Miles"]*1609.34)/(result["acList"][i]["avg_spd"]*0.514444) * 1000).toISOString().substr(11, 8);
                      cell9.innerHTML = result["acList"][i]["To"];
                      cell8.innerHTML = result["acList"][i]["Op"];
                      cell5.innerHTML = result["acList"][i]["Miles"].toFixed(3);
                      cell4.innerHTML = ((result["acList"][i]["Miles"])*5).toFixed(3);
                      cell10.innerHTML = result["acList"][i]["BwCountries"];
                      cell6.innerHTML = result["acList"][i]["avg_spd"].toFixed(3);
                      cell7.innerHTML = result["acList"][i]["avg_alt"].toFixed(3);
                    }         
              }  
            });
            document.getElementById("airline_table").setAttribute("style","display: block");
            document.getElementById("src_chart_div").setAttribute("style","display: block");
            document.getElementById("dest_chart_div").setAttribute("style","display: block");
            document.getElementById("mdl_chart_div").setAttribute("style","display: block");
            document.getElementById("fuel_chart_div").setAttribute("style","display: block");
            document.getElementById("airline_table").setAttribute("style","display: block");
          }
        }    
      }


      else if(res=="Destination Wise")
      {
        document.getElementById("change").innerHTML="Airline"
        document.getElementById("change1").innerHTML="Source"
        document.getElementById("fuel_change").innerHTML="Fuel Consumption(Gallons) Airline Wise"
        document.getElementById("src_change").innerHTML="Most Frequent Airlines (Top 15)"
        document.getElementById("dest_change").innerHTML="Most Frequent Sources (Top 15)"
        document.getElementById("mdl_change").innerHTML="Most Frequent Models Used (Top 15)"

        document.getElementById("airline_drpdown").setAttribute("style","display: none");
        document.getElementById("source_drpdown").setAttribute("style","display: none");
        document.getElementById("destination_drpdown").setAttribute("style","display: block");
        document.getElementById("total").setAttribute("style","font-weight: bold");
        $.ajax({
          type: "POST",
          url: "http://127.0.0.1:5000/flights",
          success: function(response)
          {
            var to=[];
            var res= JSON.parse(response);
            length=res.length;
            for (var i=0; i<length;i++)
            {
              to.push(res[i]["To"]);
            }
            find(destination_drpdown,to);
          }
        });


        document.getElementById("destination_drpdown").onchange=function()
        {
          document.getElementById("enter").onclick=function()
          { 
            var ans= get_dropdown_value("destination_drpdown");
            var data={"airline":ans};
            $.ajax({
          type: "POST",
          data: data,
          url: "http://127.0.0.1:5000/destination_wise",
          success: function(response)
          {
            var result= JSON.parse(response);
            console.log(result['freq_source'])
            pie_chart(result['freq_source'],'dest_chart','Most Frequent Sources (Top 15)');
            pie_chart(result['freq_airline'],'src_chart','Most Frequent Airlines (Top 15)');
            pie_chart(result['freq_model'],'mdl_chart','Most Frequent Models Used (Top 15)');
            bar_plot(result["data"],'fuel_chart',result["mdl"]);
            var table = document.getElementById("airline_table_body");
                table.innerHTML="";
                length=result["acList"].length;
                document.getElementById("total").innerHTML="ESTIMATIONS (TOTAL: "+length+") "
                for(var i=0; i<length; i++)
                {
                  var row = table.insertRow(i);
                  var cell0 = row.insertCell(0);
                  var cell1 = row.insertCell(1);
                  var cell2 = row.insertCell(2);
                  var cell3 = row.insertCell(3);
                  var cell4 = row.insertCell(4);
                  var cell5 = row.insertCell(5);
                  var cell6 = row.insertCell(6);
                  var cell7 = row.insertCell(7);
                  var cell8 = row.insertCell(8);
                  var cell9 = row.insertCell(9);
                  var cell10 = row.insertCell(10);
                  cell0.innerHTML = result["acList"][i]["Id"];
                  cell1.innerHTML = result["acList"][i]["Icao"];
                  cell2.innerHTML = result["acList"][i]["Mdl"];
                  cell3.innerHTML = new Date((result["acList"][i]["Miles"]*1609.34)/(result["acList"][i]["avg_spd"]*0.514444) * 1000).toISOString().substr(11, 8);
                  cell9.innerHTML = result["acList"][i]["To"];
                  cell8.innerHTML = result["acList"][i]["Op"];
                  cell5.innerHTML = result["acList"][i]["Miles"].toFixed(3);
                  cell4.innerHTML = ((result["acList"][i]["Miles"])*5).toFixed(3);
                  cell10.innerHTML = result["acList"][i]["BwCountries"];
                  cell6.innerHTML = result["acList"][i]["avg_spd"].toFixed(3);
                  cell7.innerHTML = result["acList"][i]["avg_alt"].toFixed(3);
                }         
          }  
        });
            document.getElementById("airline_table").setAttribute("style","display: block");
            document.getElementById("src_chart_div").setAttribute("style","display: block");
            document.getElementById("dest_chart_div").setAttribute("style","display: block");
            document.getElementById("mdl_chart_div").setAttribute("style","display: block");
            document.getElementById("fuel_chart_div").setAttribute("style","display: block");
            document.getElementById("airline_table").setAttribute("style","display: block");
          }
        }    
        
      }


      else if(res=="Speed Wise")
      {
        document.getElementById("change").innerHTML="Airline"
        document.getElementById("change1").innerHTML="Source"
        document.getElementById("fuel_change").innerHTML="Speed(knots) Airline Wise"
        document.getElementById("src_change").innerHTML="Most Frequent Airlines (Top 15)"
        document.getElementById("dest_change").innerHTML="Most Frequent Sources (Top 15)"
        document.getElementById("mdl_change").innerHTML="Most Frequent Models Used (Top 15)"

        document.getElementById("airline_drpdown").setAttribute("style","display: none");
        document.getElementById("source_drpdown").setAttribute("style","display: none");
        document.getElementById("total").setAttribute("style","font-weight: bold");
        document.getElementById("destination_drpdown").setAttribute("style","display: none");
        document.getElementById("spd_drpdown").setAttribute("style","display: block");

        document.getElementById("spd_drpdown").onchange=function()
        {
          if(get_dropdown_value("spd_drpdown")=="Custom Speed")
          {
            document.getElementById("spd_txtbox").setAttribute("style","display: block");
          }

          document.getElementById("enter").onclick=function()
          {  
            var ans;
            if(get_dropdown_value("spd_drpdown")=="Custom Speed")
            {
              ans=document.getElementById("spd_txtbox").value;
            }
            else
            {
              ans= get_dropdown_value("spd_drpdown");
            }     

            var data={};
            var x=ans.split("-")
            data["low"]=x[0];
            data["high"]=x[1];
            $.ajax({
          type: "POST",
          data: data,
          url: "http://127.0.0.1:5000/speed_wise",
          success: function(response)
          {
            var result= JSON.parse(response);
            bar_plot(result["data"],'fuel_chart',result["mdl"]);
            var table = document.getElementById("airline_table_body");
                table.innerHTML="";
                length=result["acList"].length;
                document.getElementById("total").innerHTML="ESTIMATIONS (TOTAL: "+length+") "
                for(var i=0; i<length; i++)
                {
                  var row = table.insertRow(i);
                  var cell0 = row.insertCell(0);
                  var cell1 = row.insertCell(1);
                  var cell2 = row.insertCell(2);
                  var cell3 = row.insertCell(3);
                  var cell4 = row.insertCell(4);
                  var cell5 = row.insertCell(5);
                  var cell6 = row.insertCell(6);
                  var cell7 = row.insertCell(7);
                  var cell8 = row.insertCell(8);
                  var cell9 = row.insertCell(9);
                  var cell10 = row.insertCell(10);
                  cell0.innerHTML = result["acList"][i]["Id"];
                  cell1.innerHTML = result["acList"][i]["Icao"];
                  cell2.innerHTML = result["acList"][i]["Mdl"];
                  cell3.innerHTML = new Date((result["acList"][i]["Miles"]*1609.34)/(result["acList"][i]["avg_spd"]*0.514444) * 1000).toISOString().substr(11, 8);
                  cell9.innerHTML = result["acList"][i]["To"];
                  cell8.innerHTML = result["acList"][i]["Op"];
                  cell5.innerHTML = result["acList"][i]["Miles"].toFixed(3);
                  cell4.innerHTML = ((result["acList"][i]["Miles"])*5).toFixed(3);
                  cell10.innerHTML = result["acList"][i]["BwCountries"];
                  cell6.innerHTML = result["acList"][i]["avg_spd"].toFixed(3);
                  cell7.innerHTML = result["acList"][i]["avg_alt"].toFixed(3);
                }         
          }  
        });
            document.getElementById("airline_table").setAttribute("style","display: block");
            document.getElementById("fuel_chart_div").setAttribute("style","display: block");
            document.getElementById("airline_table").setAttribute("style","display: block");
            document.getElementById("total").setAttribute("style","font-weight: bold");
          }
        }    
        
      }

    }
  });
</script>
  </body>
  </html>